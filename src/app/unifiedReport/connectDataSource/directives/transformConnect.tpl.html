<button class="btn btn-success" type="button" ng-click="addTransform()">
    <span class="glyphicon glyphicon-plus"></span>
    Add Transformation
</button>

<label ng-if="getLengthTransform()" class="ui-checkbox enable-drag-drop-query-builder">
    <input type="checkbox" ng-model="reorderTransformsAllowed" ng-click="enableDragDropQueryBuilder(reorderTransformsAllowed)">
    <span>{{ 'REPORT_BUILDER_MODULE.ENABLE_DRAG_AND_DROP' | translate }}</span>
</label>

<div ui-sortable="sortableOptions" ng-model="transforms" style="margin-top: 10px">

    <div class="moveable" ng-repeat="transform in transforms">
        <accordion close-others="true">
            <accordion-group class="notUpperCase" is-open="transform.openStatus">
                <accordion-heading>
                    <div>
                        {{getTransformName(transform.type)}} <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': transform.openStatus, 'glyphicon-chevron-right': !transform.openStatus}"></i>
                    </div>
                </accordion-heading>

                <div class="form-group select-connect-data-source" ng-if="transform.type != 'date' || !transform.field">
                    <button type="button" class="btn btn-danger btn-close-ur" ng-click="removeTransform($index)">
                        <span class="glyphicon glyphicon-minus "></span>
                    </button>
                </div>

                <div class="row">
                    <div class="form-group select-connect-data-source">
                        <label class="col-sm-2 control-label">Type</label>

                        <div class="col-sm-10">
                            <ui-select ng-model="transform.type" ng-disabled="transform.type == 'date' && !!transform.field" ng-required="true" on-select="selectTransformType(transform, $item)" server-error reset-search-input="'false'">
                                <ui-select-match placeholder="Select a transformation">{{ $select.selected.label }}
                                </ui-select-match>
                                <ui-select-choices repeat="type.key as type in getFiledFormatTypes(transforms, transform.type) | filter:$select.search">
                                    {{ type.label }}
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>

                    <div class="form-group select-connect-data-source" ng-if="transform.type == allFiledFormatTypeKeys.date || transform.type == allFiledFormatTypeKeys.number">
                        <label class="col-sm-2 control-label">Field Name</label>

                        <div class="col-sm-10">
                            <ui-select ng-model="transform.field" ng-disabled="transform.type == 'date' && !!transform.field" ng-required="true" server-error reset-search-input="'false'">
                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                <ui-select-choices repeat="field.key as field in getFieldNames(transform.type) | filter:filterFieldByType(transform) | filter:$select.search">
                                    {{ field.label }}
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.date">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Date From Format</label>

                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addFromFormat(transform.from)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Date From Format
                                    </button>

                                    <div class="expressions-group" ng-repeat="from in transform.from">
                                        <div class="form-group select-connect-data-source">
                                            <button type="button" class="btn btn-danger btn-close-ur" ng-disabled="transform.from.length == 1" ng-click="removeAddValue(transform.from, $index)">
                                                <span class="glyphicon glyphicon-minus "></span>
                                            </button>
                                        </div>

                                        <div>
                                            <label class="ui-checkbox"><input server-error name="active" type="checkbox" ng-change="selectCustomFormatDate(from)" ng-model="from.isCustomFormatDateFrom" id="isCustomFormatDateFrom"><span>Use custom format</span></label>

                                            <div ng-if="!from.isCustomFormatDateFrom">
                                                <ui-select ng-model="from.format" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a date format">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="type.keyForJS as type in dateFormatTypes | filter:$select.search">
                                                        {{ type.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div ng-if="from.isCustomFormatDateFrom">
                                                <input server-error name="from" ng-model="from.format" ng-required="true" type="text" ng-pattern="/^([Y]{2}|[Y]{4}|[M]{1,4}|[D]{1,2})[\-,\.,\/,_\s]*([Y]{2}|[Y]{4}|[M]{1,4}|[D]{1,2})[\-,\.,\/,_\s]*([Y]{2}|[Y]{4}|[M]{1,4}|[D]{1,2})*(([T]{1}|[H]{2,2}|[m]{2,2}|[s]{2,2})|[\\\-,\.,\/,_:\s])*((T?))?$/" class="form-control" placeholder="Date From Format">
                                                <span class="help-block"> {{ 'UNIFIED_REPORT_CONNECTED_DATA_SOURCE_MODULE.INPUT_DATE_FORMAT_HELP_TEXT' | translate }} </span>
                                            </div>
                                        </div>

                                        <div>
                                            <label class="ui-checkbox">
                                                <input type="checkbox" ng-model="from.isPartialMatch">
                                                <span>Partial Match</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="form-group select-alert-timezone" ng-if="dimensionsMetrics[transform.field] != 'date'">
                                        <label class="control-label">Timezone</label>
                                        <div>
                                            <ui-select ng-model="transform.timezone" ng-required="true" server-error reset-search-input="'false'">
                                                <ui-select-match placeholder="Select a timezone">{{ $select.selected.label }}</ui-select-match>
                                                <ui-select-choices group-by="groupEntities" repeat="timezone.key as timezone in timezones">
                                                    {{ timezone.label }}
                                                </ui-select-choices>
                                            </ui-select>

                                            <span class="help-block">Timezone only take effect when timezone part is not present in the date value</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Date To Format</label>

                            <div class="col-sm-10 form-control-static">
                                <ui-select ng-model="transform.to" ng-disabled="transform.type == 'date' && !!transform.field" ng-required="true" server-error reset-search-input="'false'">
                                    <!--<ui-select-match placeholder="Select a date format">{{ $select.selected.label }}</ui-select-match>-->
                                    <ui-select-match placeholder="Select a date format">{{ showDateToFormat(transform, $select)  }}</ui-select-match>
                                    <ui-select-choices repeat="type.keyForJS as type in dateFormatTypes | filter:$select.search">
                                        {{ type.label }}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.number">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Decimals</label>
                            <div class="col-sm-10">
                                <input class="form-control" type="number" ng-model="transform.decimals" ng-required="true" placeholder="Decimals">
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Thousands Separator</label>
                            <div class="col-sm-10">
                                <ui-select ng-model="transform.thousandsSeparator" ng-required="true" server-error reset-search-input="'false'">
                                    <ui-select-match placeholder="Select a separator">{{ $select.selected.label }}</ui-select-match>
                                    <ui-select-choices repeat="separator.key as separator in separatorType | filter:$select.search">
                                        {{ separator.label }}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.groupBy">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Group Fields</label>

                            <div class="col-sm-10">
                                <ui-select multiple ng-model="transform.fields" ng-required="true" server-error reset-search-input="'false'">
                                    <ui-select-match placeholder="Select a field">{{ $item.label }} </ui-select-match>
                                    <ui-select-choices repeat="field.key as field in totalFields.totalFieldForGroupBy | filter:$select.search">
                                        {{ field.label }}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Aggregate Metrics</label>
                            <div class="col-sm-10">
                                <div ng-if="!transform.aggregateAll">
                                    <ui-select multiple="true" ng-model="transform.aggregationFields" ng-required="true" server-error reset-search-input="'false'">
                                        <ui-select-match placeholder="Select a field">{{ $item.label }}</ui-select-match>
                                        <ui-select-choices repeat="field.key as field in totalFields.totalDimensionsMetricsAllFieldTransform | filter:filterNumberFields | filter:$select.search">
                                            {{ field.label }}
                                        </ui-select-choices>
                                    </ui-select>
                                </div>

                                <label class="ui-checkbox"><input server-error name="active" type="checkbox" ng-model="transform.aggregateAll" id="inputEnabled"><span>Aggregate All</span></label>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.sortBy">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Sort By</label>

                            <div class="col-sm-10">
                                <div ng-repeat="field in transform.fields">
                                    <div class="form-group">
                                        <label class="control-label">{{ field.direction == 'asc' ? 'Ascending' : 'Descending'}}</label>

                                        <div>
                                            <ui-select multiple ng-model="field.names" reset-search-input="'false'">
                                                <ui-select-match placeholder="Select a field">{{ $item.label }}</ui-select-match>
                                                <ui-select-choices repeat="field.key as field in totalFields.totalFieldForGroupBy | filter:filterFieldNameForSortBy(transform.fields, field) | filter:$select.search">
                                                    {{ field.label }}
                                                </ui-select-choices>
                                            </ui-select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.addField">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Add Field</label>

                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addField(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Field
                                    </button>

                                    <div ng-repeat="field in transform.fields">
                                        <div class="expressions-group condition">
                                            <div class="form-group select-connect-data-source">
                                                <button type="button" class="btn btn-danger btn-close-ur"
                                                        ng-click="removeAddValue(transform.fields, $index)">
                                                    <span class="glyphicon glyphicon-minus "></span>
                                                </button>
                                            </div>

                                            <div class="row">
                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Field Name</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.field" ng-required="true" server-error reset-search-input="'false'" on-select="selectTypeAddField($item, field)" ng-init="selectTypeAddField(field.type)">
                                                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="dm.key as dm in totalFields.totalDimensionsMetricsForAddField | filter:showFieldCurrentAndNotShowExist(field.field) | filter:notInMapField | filter:$select.search">
                                                                    {{ dm.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source" ng-if="dimensionsMetrics[field.field] == 'number' || dimensionsMetrics[field.field] == 'decimal'">
                                                    <label class="col-sm-2 control-label">Value</label>
                                                    <div class="col-sm-10">
                                                        <input server-error ng-required="true" type="number" class="form-control" ng-model="field.value" placeholder="Value">
                                                    </div>
                                                </div>

                                                <div class="form-group" ng-if="dimensionsMetrics[field.field] == 'text' || dimensionsMetrics[field.field] == 'largeText' || !dimensionsMetrics[field.field]">
                                                    <label class="col-sm-2 control-label">Expression</label>
                                                    <div class="col-sm-10">
                                                    <textarea class="addScrollToTextArea form-control" rows="5" spellcheck="false" id="concatenated-{{$index}}" mentio mentio-select="getPeopleText(item)"
                                                              type="text"
                                                              ng-change="removeAutoSpaceAfterField(field, $index)"
                                                              mentio-trigger-char="'['" mentio-macros="macros"
                                                              mentio-typed-text="typedTerm" mentio class="form-control"
                                                              mentio-items="fieldForExpression | filter:label:typedTerm"
                                                              ng-model="field.value" placeholder="Expression">
                                                    </textarea>

                                                        <span class="help-block">Use character <strong>[</strong> to show list of available variables. Each variable should be inside square bracket.</span>
                                                        <div class="callout-success expressions-transform" ng-bind-html="formatExpressionToHighlight(field)"></div>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source"  ng-if="dimensionsMetrics[field.field] == 'date' || dimensionsMetrics[field.field] == 'datetime'">
                                                    <label class="col-sm-2 control-label">Date</label>
                                                    <div class="col-sm-10">
                                                        <div class="input-group" ng-if="field.value != '[__date]'">
                                                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                            <input date-range-picker ng-required="true" options="datePickerOpts" class="form-control date-picker" type="text" id="inputStartDate" ng-model="field.value">
                                                        </div>

                                                        <label class="ui-checkbox">
                                                            <input type="checkbox" ng-model="useDate" ng-checked="field.value == '[__date]'" ng-click="clickUseExternalDate(field, useDate)">
                                                            <span>Set date from metadata</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.addCalculatedField">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Add Calculated Field</label>

                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addCalculatedField(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Calculated Field
                                    </button>

                                    <div ng-repeat="field in transform.fields">
                                        <div class="expressions-group condition">
                                            <div class="form-group select-connect-data-source">
                                                <button type="button" class="btn btn-danger btn-close-ur" ng-click="removeAddValue(transform.fields, $index)">
                                                    <span class="glyphicon glyphicon-minus "></span>
                                                </button>
                                            </div>

                                            <div class="row">
                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Field Name</label>

                                                    <div class="col-sm-10">
                                                        <ui-select ng-model="field.field" ng-required="true" server-error reset-search-input="'false'" on-select="selectTypeAddCalculatedField($item, field)" ng-init="selectTypeAddCalculatedField(field.type)">
                                                            <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                            <ui-select-choices repeat="dm.key as dm in getDimensionsMetricsForNumberAddField(field.field, transforms) | filter:showFieldCurrentAndNotShowExist(field.field) | filter:notInMapField | filter:$select.search">
                                                                {{ dm.label }}
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source">
                                                    <label for="dataSet" class="col-sm-2 control-label">Default Values</label>
                                                    <div class="col-sm-10">
                                                        <div class="expressions-group">
                                                            <button class="btn btn-success" type="button" ng-click="addDefaultValue(field)">
                                                                <span class="glyphicon glyphicon-plus"></span>
                                                                Add Default Value
                                                            </button>

                                                            <label class="ui-checkbox enable-drag-drop-query-builder">
                                                                <input type="checkbox" ng-model="reorderDefaultValueAllowed" ng-click="enableDragDropDefaultValue(reorderDefaultValueAllowed)">
                                                                <span>Enable drag/drop to change the priority</span>
                                                            </label>

                                                            <div ui-sortable="sortableDefaultValueOptions" ng-model="field.defaultValues">
                                                                <div ng-repeat="defaultValue in field.defaultValues" class="select-connect-data-source">
                                                                    <div class="moveable expressions-group">
                                                                        <div class="form-group select-connect-data-source">
                                                                            <button type="button" class="btn btn-danger btn-close-ur" ng-click="removeAddValue(field.defaultValues, $index)">
                                                                                <span class="glyphicon glyphicon-minus "></span>
                                                                            </button>
                                                                        </div>

                                                                        <div class="form-inline condition">
                                                                            <label class="col-sm-2 control-label">Condition</label>

                                                                            <div class="col-sm-10 row select-connect-data-source">
                                                                                <div class="form-group select-data-type">
                                                                                    <ui-select name="defaultValueField" ng-model="defaultValue.conditionField" ng-required="true" server-error reset-search-input="'false'">
                                                                                        <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                                        <ui-select-choices repeat="field.key as field in totalFields.dimensionsMetricsForDefaultValues | filter:notShowCurrentField(field.field) | filter:$select.search">
                                                                                            {{ field.label }}
                                                                                        </ui-select-choices>
                                                                                    </ui-select>
                                                                                </div>

                                                                                <div class="form-group select-data-type">
                                                                                    <ui-select name="rightSide" ng-model="defaultValue.conditionComparator" on-select='selectedComparison(defaultValue)' ng-required="true" server-error reset-search-input="'false'">
                                                                                        <ui-select-match placeholder="Select an operator">{{ $select.selected.label }}</ui-select-match>
                                                                                        <ui-select-choices repeat="separator.key as separator in conditionComparators | filter:$select.search">
                                                                                            {{ separator.label }}
                                                                                        </ui-select-choices>
                                                                                    </ui-select>
                                                                                </div>

                                                                                <div class="form-group select-data-type" ng-if="defaultValue.conditionComparator != 'is invalid'">
                                                                                    <div ng-if="defaultValue.conditionComparator != 'in' && defaultValue.conditionComparator != 'not in'">
                                                                                        <input server-error name="value" ng-model="defaultValue.conditionValue" ng-required="true" type="number" class="form-control" placeholder="Condition Value">
                                                                                    </div>

                                                                                    <div ng-if="defaultValue.conditionComparator == 'in' || defaultValue.conditionComparator == 'not in'">
                                                                                        <oi-select ng-model="defaultValue.conditionValue" multiple ng-required="true" oi-select-options="{newItem: true, newItemFn: 'addCompareValue($query)'}" placeholder="{{ 'REPORT_BUILDER_MODULE.ENTER_ONE_OR_MULTIPLE_VALUE' | translate }}"></oi-select>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                        <div class="form-inline condition">
                                                                            <label class="col-sm-2 control-label">Value</label>

                                                                            <div class="form-group select-data-type">
                                                                                <input server-error name="value" ng-model="defaultValue.defaultValue" ng-required="true" type="number" class="form-control" placeholder="Value">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label class="col-sm-2 control-label">Expression</label>

                                                    <div class="col-sm-10">
                                                        <textarea class="addScrollToTextArea form-control" rows="5" spellcheck="false" mentio mentio-select="getPeopleText(item)" ng-change="addSpaceBeforeAndAfterOperator(field)" type="text" mentio-trigger-char="'['" mentio-macros="macros" mentio-typed-text="typedTerm" mentio class="form-control" mentio-items="fieldForExpressionInCalculated | filter:label:typedTerm" ng-model="field.expression" placeholder="Expression"></textarea>
                                                        <span class="help-block">Use character <strong>[</strong> to show list of available variables. Each variable should be inside square bracket.</span>

                                                        <div class="callout-success expressions-transform" ng-bind-html="formatExpressionToHighlight(field)"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.comparisonPercent">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Comparison Percent</label>

                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addComparisonPercent(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Comparison Percent
                                    </button>

                                    <div class="expressions-group" ng-repeat="comparison in transform.fields">
                                        <div class="form-group select-connect-data-source">
                                            <button type="button" class="btn btn-danger btn-close-ur"
                                                    ng-click="removeAddValue(transform.fields, $index)">
                                                <span class="glyphicon glyphicon-minus "></span>
                                            </button>
                                        </div>

                                        <div class="row">
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Field Name</label>

                                                <div class="col-sm-10">
                                                    <ui-select ng-model="comparison.field" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                        <ui-select-choices repeat="dm.key as dm in totalFields.totalDimensionsMetricsForAddField | filter:filterNumberFields | filter:showFieldCurrentAndNotShowExist(comparison.field) | filter:notInMapField | filter:$select.search">
                                                            {{ dm.label }}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">First Field</label>

                                                <div class="col-sm-10">
                                                    <ui-select ng-model="comparison.numerator" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match placeholder="Select a comparison operator">{{$select.selected.label }}</ui-select-match>
                                                        <ui-select-choices repeat="dm.key as dm in totalFields.dataSourceFieldsAllFieldTransform | filter:filterForComparison | filter:$select.search">
                                                            {{ dm.label }}
                                                        </ui-select-choices>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label">Second Field</label>

                                                <div class="col-sm-10">
                                                    <ui-select ng-model="comparison.denominator" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match placeholder="Select a comparison operator">{{ $select.selected.label }}</ui-select-match>
                                                        <ui-select-choices repeat="dm.key as dm in totalFields.dataSourceFieldsAllFieldTransform | filter:filterForComparison | filter:$select.search">
                                                            {{ dm.label }}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.replaceText">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Replace Text</label>

                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addReplaceText(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Replace Text
                                    </button>

                                    <div class="expressions-group" ng-repeat="replaceText in transform.fields">
                                        <div class="form-group select-connect-data-source">
                                            <button type="button" class="btn btn-danger btn-close-ur"
                                                    ng-click="removeAddValue(transform.fields, $index)">
                                                <span class="glyphicon glyphicon-minus "></span>
                                            </button>
                                        </div>

                                        <div class="row">
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Field Name</label>
                                                <div class="col-sm-10">
                                                    <ui-select ng-model="replaceText.field" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match allow-clear="true" placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                        <ui-select-choices repeat="dm.key as dm in getDataSourceFieldsForReplace(replaceText.isOverride) | filter:$select.search">
                                                            {{ dm.label }}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group select-connect-data-source">
                                                <label for="isOverride" class="col-sm-2 control-label">Override Value</label>
                                                <div class="col-sm-10">
                                                    <label class="ui-checkbox"><input server-error name="active" ng-disabled= "disableOverride(replaceText)" ng-change="resetFieldNameInReplaceTextTransform(replaceText.isOverride, replaceText)" type="checkbox" ng-model="replaceText.isOverride" id="isOverride"><span></span></label>
                                                </div>
                                            </div>
                                            <div class="form-group select-connect-data-source" ng-if="!replaceText.isOverride">
                                                <label class="col-sm-2 control-label">Target Field</label>
                                                <div class="col-sm-10">
                                                    <div class="form-group select-data-type">
                                                        <ui-select ng-model="replaceText.targetField" ng-required="true" server-error reset-search-input="'false'">
                                                            <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                            <ui-select-choices repeat="dm.key as dm in totalFields.totalDimensionsMetricsAndTemporaryFields | filter:filterTarget(replaceText.targetField) | filter:filterFieldByText | filter:filterFieldInTransformReplaceText | filter:notInMapFieldAndShowFieldCurrent(replaceText.targetField) | filter:$select.search">
                                                                {{ dm.label }}
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Search For</label>
                                                <div class="col-sm-10">
                                                    <input server-error name="searchFor" ng-model="replaceText.searchFor" ng-required="true" type="text" class="form-control" placeholder="Search For">
                                                </div>
                                            </div>
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Position</label>
                                                <div class="col-sm-10">
                                                    <ui-select ng-model="replaceText.position" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match placeholder="Select a position">{{ $select.selected.label }}</ui-select-match>
                                                        <ui-select-choices repeat="position.key as position in positionsForReplaceText">
                                                            {{ position.label }}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Replace With</label>
                                                <div class="col-sm-10">
                                                    <input server-error name="replaceWith" ng-model="replaceText.replaceWith" type="text" class="form-control" placeholder="Replace With">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.extractPattern">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Extract Pattern</label>
                            <div class="col-sm-10">
                                <div class="expressions-group">

                                    <button class="btn btn-success" type="button" ng-click="addExtractPattern(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Extract Pattern
                                    </button>

                                    <div class="expressions-group" ng-repeat="extractPattern in transform.fields">
                                        <div class="form-group select-connect-data-source">
                                            <button type="button" class="btn btn-danger btn-close-ur"
                                                    ng-click="removeAddValue(transform.fields, $index)">
                                                <span class="glyphicon glyphicon-minus "></span>
                                            </button>
                                        </div>

                                        <div class="row">
                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Field Name</label>
                                                <div class="col-sm-10">
                                                    <ui-select ng-model="extractPattern.field" ng-required="true" server-error reset-search-input="'false'">
                                                        <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                        <!--<ui-select-choices repeat="dm.key as dm in getDataSourceFieldsForExtractPattern() | filter:filterFieldByTextAndDate | filter:$select.search">-->
                                                        <!--<ui-select-choices repeat="dm.key as dm in getDataSourceFieldsForExtractPattern() | filter:showFieldCurrentAndNotShowExist(extractPattern.field) | filter:$select.search">-->
                                                        <ui-select-choices repeat="dm.key as dm in getDataSourceFieldsForExtractPattern() | filter:$select.search">
                                                            {{ dm.label }}
                                                        </ui-select-choices>
                                                    </ui-select>
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source">
                                                <label for="isOverride" class="col-sm-2 control-label">Replace value</label>
                                                <div class="col-sm-10">
                                                    <label class="ui-checkbox"><input server-error name="active" ng-disabled="disabledOverrideValue(extractPattern.field)" type="checkbox" ng-change="filterFieldsForInputField(extractPattern.isOverride, extractPattern)" ng-model="extractPattern.isOverride"><span></span></label>
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source" ng-if="!extractPattern.isOverride">
                                                <label class="col-sm-2 control-label">Target Field</label>
                                                <div class="col-sm-10">
                                                    <div class="form-group select-data-type">
                                                        <ui-select ng-model="extractPattern.targetField" ng-required="true" server-error reset-search-input="'false'">
                                                            <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                            <ui-select-choices repeat="dm.key as dm in totalFields.totalDimensionsMetricsAndTemporaryFields | filter:showFieldCurrentAndNotShowExist(extractPattern.targetField) | filter:filterFieldInTransformExtractPattern(extractPattern.targetField) | filter:filterTarget(extractPattern.targetField) | filter:filterTargetFieldForExtractPattern(extractPattern.targetField) | filter:$select.search">
                                                                {{ dm.label }}
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source">
                                                <label for="isOverride" class="col-sm-2 control-label">Case Insensitive</label>
                                                <div class="col-sm-10">
                                                    <label class="ui-checkbox"><input server-error name="active" type="checkbox" ng-model="extractPattern.isCaseInsensitive" id="isCaseInsensitive"><span></span></label>
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source">
                                                <label class="col-sm-2 control-label">Search Pattern</label>
                                                <div class="col-sm-10">
                                                    <input server-error name="searchFor" ng-model="extractPattern.searchPattern" ng-required="true" type="text" class="form-control" placeholder="Enter regular expression">
                                                </div>
                                            </div>

                                            <div class="form-group select-connect-data-source">
                                                <label for="replacementValue" class="col-sm-2 control-label">Replacement Value</label>
                                                <div class="col-sm-10">
                                                    <input server-error name="replacementValue" spellcheck="false" type="text" class="form-control" min="1" ng-model="extractPattern.replacementValue" id="replacementValue" placeholder="Replacement Value">
                                                    <span class="help-block"> {{ 'UNIFIED_REPORT_CONNECTED_DATA_SOURCE_MODULE.REPLACEMENT_VALUE_HELP_TEXT' | translate }} </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.augmentation">
                        <div class="form-group select-connect-data-source">
                            <label for="dataSet" class="col-sm-2 control-label">Map Data Set</label>
                            <div class="col-sm-10">
                                <ui-select name="dataSet" id="dataSet" on-select="selectDataSet($item, transform)" ng-model="transform.mapDataSet" ng-required="true" server-error reset-search-input="'false'">
                                    <ui-select-match placeholder="Select a Data Set">{{ $select.selected.name + ' (ID: ' + $select.selected.id + ')' }}</ui-select-match>
                                    <ui-select-choices repeat="dataSet.id as dataSet in listDataSets | filter:filterDataSet(transform.mapDataSet) | filter: { name: $select.search }">
                                        {{ dataSet.name + ' (ID: ' + dataSet.id + ')'}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>


                        <div class="form-group select-connect-data-source">
                            <label for="dataSet" class="col-sm-2 control-label">Join Field</label>
                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addMapCondition(transform.mapConditions)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Join Field
                                    </button>

                                    <div class="form-inline condition">
                                        <div ng-repeat="mapCondition in transform.mapConditions" class="select-connect-data-source">
                                            <div class="form-group select-data-type">
                                                <ui-select name="dataSet" ng-model="mapCondition.leftSide" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="field.key as field in totalFields.totalDataSourceFieldsAugmentationLeftSide | filter:filterMapFieldLeft(transform, mapCondition) | filter:filterLeftSideAugmentation(transform) | filter:$select.search ">
                                                        {{ field.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div class="form-group select-data-type">
                                                <ui-select name="dataSet" ng-model="mapCondition.rightSide" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected }}</ui-select-match>
                                                    <ui-select-choices repeat="field in transform.allFieldsDataSet | filter: $select.search">
                                                        {{ field }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <button ng-disabled="transform.mapConditions.length == 1" class="btn btn-danger" style="margin-left: 5px" type="button" ng-click="removeAddValue(transform.mapConditions, $index)"><span class="glyphicon glyphicon-minus"></span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <label class="ui-checkbox"><input server-error name="active" type="checkbox" ng-model="transform.dropUnmatched" id="dropUnmatched"><span>Require Join</span></label>

                                <span class="help-block">Data that does not have a valid join will be removed</span>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label for="dataSet" class="col-sm-2 control-label">Join Condition</label>
                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addCustomCondition(transform.customCondition)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Join Condition
                                    </button>

                                    <div class="form-inline condition">
                                        <div ng-repeat="custom in transform.customCondition" class="select-connect-data-source">
                                            <div class="form-group select-data-type">
                                                <ui-select name="leftSide" ng-model="custom.field" ng-required="true" on-select="selectCustomField(custom)" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected }}</ui-select-match>
                                                    <ui-select-choices repeat="field in transform.allFieldsDataSet | filter:$select.search">
                                                        {{ field }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div class="form-group select-data-type">
                                                <ui-select name="rightSide" ng-model="custom.operator" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select an operator">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="separator.key as separator in getSeparatorType(transform, custom.field) | filter:$select.search">
                                                        {{ separator.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div class="form-group select-data-type" ng-if="isValueForCustom(custom, transform)">
                                                <input server-error name="value" ng-model="custom.value" ng-required="true" type="{{ (_getTotalFieldDataSetInAugmentation(transform.mapDataSet)[custom.field] == 'number' || _getTotalFieldDataSetInAugmentation(transform.mapDataSet)[custom.field] == 'decimal') ? 'number' : 'text'}}" class="form-control" placeholder="Value">
                                            </div>

                                            <div class="form-group select-data-type" ng-if="isDateForCustom(custom, transform)">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                    <input date-range-picker ng-required="true" options="datePickerOpts" class="form-control date-picker" type="text" ng-model="custom.value">
                                                </div>
                                            </div>

                                            <button class="btn btn-danger" style="margin-left: 5px" type="button" ng-click="removeAddValue(transform.customCondition, $index)"><span class="glyphicon glyphicon-minus"></span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label for="dataSet" class="col-sm-2 control-label">Map Fields</label>
                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addMapFields(transform.mapFields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Map Fields
                                    </button>

                                    <div class="form-inline condition">
                                        <div ng-repeat="mapField in transform.mapFields" class="select-connect-data-source">
                                            <div class="form-group select-data-type">
                                                <ui-select name="leftSide" ng-model="mapField.leftSide" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="field.key as field in totalFields.totalDimensionsMetricsAndTemporaryFields | filter:filterTarget(mapField.leftSide) | filter:filterMapFieldLeftSide(transform, mapField) | filter:$select.search">
                                                        {{ field.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div class="form-group select-data-type">
                                                <ui-select name="rightSide" ng-model="mapField.rightSide" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected }}</ui-select-match>
                                                    <ui-select-choices repeat="field in transform.allFieldsDataSet | filter:filterMapFieldRightSide(transform, mapField) | filter:$select.search">
                                                        {{ field }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <button ng-disabled="transform.mapFields.length == 1" class="btn btn-danger" type="button" ng-click="removeAddValue(transform.mapFields, $index)"><span class="glyphicon glyphicon-minus"></span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.subsetGroup">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Group Fields</label>

                            <div class="col-sm-10">
                                <ui-select multiple ng-model="transform.groupFields" ng-required="true" server-error reset-search-input="'false'">
                                    <ui-select-match placeholder="Select a field">{{ $item.label }} </ui-select-match>
                                    <ui-select-choices repeat="field.key as field in totalFields.totalFieldForGroupBy | filter:$select.search">
                                        {{ field.label }}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label for="dataSet" class="col-sm-2 control-label">Map Fields</label>
                            <div class="col-sm-10">
                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addMapFieldForSubsetGroup(transform.mapFields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Map Field
                                    </button>

                                    <div ng-repeat="mapField in transform.mapFields" class="select-connect-data-source">
                                        <div class="form-inline condition">
                                            <div class="form-group select-data-type">
                                                <ui-select name="defaultValueField" ng-model="mapField.leftSide" ng-required="true" on-select="selectMapFieldLeftSideSubsetGroup(mapField)" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="field.key as field in totalFields.totalDimensionsMetricsAndTemporaryFields | filter:filterFieldByTextAndNumber | filter:notInMapFieldAndShowFieldCurrent(mapField.leftSide) | filter:notShowFieldExistInTransforms | filter:$select.search">
                                                        {{ field.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <div class="form-group select-data-type">
                                                <ui-select name="rightSide" ng-model="mapField.rightSide" ng-required="true" server-error reset-search-input="'false'">
                                                    <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                    <ui-select-choices repeat="field.key as field in dataSourceFields | filter:mapDataSourceFieldForMapFieldRightSide(mapField) | filter:$select.search">
                                                        {{ field.label }}
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>

                                            <button ng-disabled="transform.mapFields.length == 1" class="btn btn-danger" type="button" ng-click="removeAddValue(transform.mapFields, $index)"><span class="glyphicon glyphicon-minus"></span></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Aggregate Fields</label>
                            <div class="col-sm-10">
                                <div ng-if="!transform.aggregateAll">
                                    <ui-select multiple="true" ng-model="transform.aggregationFields" ng-required="true" server-error reset-search-input="'false'">
                                        <ui-select-match placeholder="Select a field">{{ $item.label }}</ui-select-match>
                                        <ui-select-choices repeat="field.key as field in dataSourceFields | filter:filterAggregationForGroupSubSet(transform) | filter:$select.search">
                                            {{ field.label }}
                                        </ui-select-choices>
                                    </ui-select>
                                </div>

                                <label class="ui-checkbox"><input server-error name="active" type="checkbox" ng-model="transform.aggregateAll" id="aggregateAll"><span>Aggregate All</span></label>
                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.convertCase">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Convert Case</label>

                            <div class="col-sm-10">

                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addConvertCase(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Convert Case
                                    </button>

                                    <div ng-repeat="field in transform.fields">
                                        <div class="expressions-group condition">
                                            <div class="form-group select-connect-data-source">
                                                <button type="button" class="btn btn-danger btn-close-ur" ng-click="removeAddValue(transform.fields, $index)">
                                                    <span class="glyphicon glyphicon-minus "></span>
                                                </button>
                                            </div>

                                            <div class="row">
                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Field Name</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.field" ng-required="true" server-error reset-search-input="'false'" on-select="selectFieldNormalizeAndConvert(field)">
                                                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="dm.key as dm in getDimensionsMetricsForConvertCase(field.field, transform) | filter:$select.search">
                                                                    {{ dm.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Override</label>
                                                    <div class="col-sm-10">
                                                        <label class="ui-checkbox"><input server-error name="active" ng-disabled="disabledOverride(field.field)" ng-click="checkOverride(field)" type="checkbox" ng-model="field.isOverride"><span></span></label>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source" ng-if="!field.isOverride">
                                                    <label class="col-sm-2 control-label">Target</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.targetField" ng-required="true" server-error reset-search-input="'false'">
                                                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="dm.key as dm in totalDimensionsMetrics | filter:filterTarget(field.targetField) | filter:filterTextFields | filter:notInMapFieldAndShowFieldCurrent(field.targetField) | filter:$select.search">
                                                                    {{ dm.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Type</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.type" ng-required="true" server-error reset-search-input="'false'">
                                                                <ui-select-match placeholder="Select a type">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="type.key as type in ConvertCaseTypes | filter:$select.search">
                                                                    {{ type.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div ng-if="transform.type == allFiledFormatTypeKeys.normalizeText">
                        <div class="form-group select-connect-data-source">
                            <label class="col-sm-2 control-label">Normalize Text</label>

                            <div class="col-sm-10">

                                <div class="expressions-group">
                                    <button class="btn btn-success" type="button" ng-click="addNormalizeText(transform.fields)">
                                        <span class="glyphicon glyphicon-plus"></span>
                                        Add Normalize Text
                                    </button>

                                    <div ng-repeat="field in transform.fields">
                                        <div class="expressions-group condition">
                                            <div class="form-group select-connect-data-source">
                                                <button type="button" class="btn btn-danger btn-close-ur"
                                                        ng-click="removeAddValue(transform.fields, $index)">
                                                    <span class="glyphicon glyphicon-minus "></span>
                                                </button>
                                            </div>

                                            <div class="row">
                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Field Name</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.field" ng-required="true" server-error reset-search-input="'false'" on-select="selectFieldNormalizeAndConvert(field)">
                                                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="dm.key as dm in getDimensionsMetricsForNormalizeText(field.field, transform) | filter:$select.search">
                                                                    {{ dm.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source">
                                                    <label class="col-sm-2 control-label">Override</label>
                                                    <div class="col-sm-10">
                                                        <label class="ui-checkbox"><input ng-disabled="disabledOverride(field.field)" server-error name="active" ng-click="checkOverride(field)" type="checkbox" ng-model="field.isOverride"><span></span></label>
                                                    </div>
                                                </div>

                                                <div class="form-group select-connect-data-source" ng-if="!field.isOverride">
                                                    <label class="col-sm-2 control-label">Target</label>
                                                    <div class="col-sm-10">
                                                        <div class="form-group select-data-type">
                                                            <ui-select ng-model="field.targetField" ng-required="true" server-error reset-search-input="'false'">
                                                                <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                                                                <ui-select-choices repeat="dm.key as dm in totalDimensionsMetrics | filter:filterTarget(field.targetField) | filter:notInMapFieldAndShowFieldCurrent(field.targetField) | filter:filterTextFields | filter:$select.search">
                                                                    {{ dm.label }}
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-sm-offset-2 col-sm-10">
                                                        <div class="row">
                                                            <div  class="col-sm-4">
                                                                <label class="ui-checkbox"><input type="checkbox" ng-model="field.numberRemoved">
                                                                    <span>Remove Numbers</span>
                                                                </label>
                                                            </div>

                                                            <div  class="col-sm-4">
                                                                <label class="ui-checkbox"><input type="checkbox" ng-model="field.dashesRemoved">
                                                                    <span>Remove Whitespace</span>
                                                                </label>
                                                            </div>

                                                            <div  class="col-sm-4">
                                                                <label class="ui-checkbox"><input type="checkbox" ng-model="field.alphabetCharacterRemoved">
                                                                    <span>Remove Non-Alphanumeric</span>
                                                                </label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </accordion-group>
        </accordion>
    </div>
</div>