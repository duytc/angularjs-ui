<button class="btn btn-success" type="button" ng-click="addFilter()">
    <span class="glyphicon glyphicon-plus"></span>
    Add Filter
</button>

<div class="expressions-group" ng-repeat="filter in filters">
    <div class="form-group select-connect-data-source">
        <button type="button" class="btn btn-danger btn-close-ur" ng-click="removeFilter($index)">
            <span class="glyphicon glyphicon-minus "></span>
        </button>
    </div>

    <div class="row">
        <div class="form-group select-connect-data-source">
            <label class="col-sm-2 control-label">Field Name</label>

            <div class="col-sm-10">
                <ui-select ng-model="filter.field" ng-required="true" server-error on-select="onSelectFieldName(filter)" reset-search-input="'false'">
                    <ui-select-match placeholder="Select a field">{{ $select.selected }}</ui-select-match>
                    <ui-select-choices repeat="field in dataSourceFields | orderBy | filter:$select.search">
                        {{ field }}
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>

        <div class="form-group select-connect-data-source" ng-if="showSelectType(filter)">
            <label class="col-sm-2 control-label">Field Type</label>

            <div class="col-sm-10">
                <ui-select ng-model="filter.type" ng-required="true" server-error on-select="onSelectFilterType(filter)" reset-search-input="'false'">
                    <ui-select-match placeholder="Select a field">{{ $select.selected.label }}</ui-select-match>
                    <ui-select-choices repeat="field.key as field in fieldTypes | orderBy | filter:$select.search">
                        {{ field.label }}
                    </ui-select-choices>
                </ui-select>
            </div>
        </div>

        <div ng-if="filter.type == 'date'">

            <div class="form-group select-connect-data-source">
                <label class="col-sm-2 control-label">Format date</label>

                <div class="col-sm-10">
                    <ui-select ng-model="filter.format" ng-required="true" server-error reset-search-input="'false'">
                        <ui-select-match placeholder="Select format date">{{ $select.selected.label }}</ui-select-match>
                        <ui-select-choices repeat="field.key as field in dateFormatTypes | orderBy | filter:$select.search">
                            {{ field.label }}
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div class="form-group select-connect-data-source">
                <label class="col-sm-2 control-label" for="inputDateRange">Date Range</label>

                <div class="col-sm-10">
                    <div class="input-group">
                        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        <input date-range-picker options="datePickerOpts" class="form-control date-picker" autocomplete="false" type="text" id="inputDateRange" ng-model="filter.date" ng-required="true">
                    </div>
                </div>
            </div>
        </div>

        <div ng-if="filter.type != 'date'">
            <div class="form-group select-connect-data-source">
                <label class="col-sm-2 control-label">Comparison</label>

                <div class="col-sm-10">
                    <ui-select ng-model="filter.comparison" ng-required="true" server-error on-select='selectedComparison(filter)' reset-search-input="'false'">
                        <ui-select-match placeholder="Select a comparison operator">{{ $select.selected.label }}
                        </ui-select-match>
                        <ui-select-choices repeat="type.key as type in getComparisonTypes(filter) | filter:$select.search">
                            {{ type.label }}
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>

            <div ng-if="filter.comparison !='isNotEmpty' && filter.comparison !='isEmpty'">
                <div class="form-group select-connect-data-source" ng-if="filter.type == 'text'">
                    <label class="col-sm-2 control-label" for="inputDateRange">Comparison Value</label>

                    <div class="col-sm-10">
                        <oi-select ng-model="filter.compareValue" multiple ng-required="true" oi-select-options="{newItem: true}" placeholder="{{ 'REPORT_BUILDER_MODULE.ENTER_ONE_OR_MULTIPLE_VALUE' | translate }}"></oi-select>

                        <span class="help-block" ng-if="!!filter.comparison && filter.comparison != 'in' && filter.comparison != 'not in'">{{ 'REPORT_BUILDER_MODULE.HELP_TEXT_FOR_ENTER_VALUES' | translate }}</span>
                    </div>
                </div>

                <div class="form-group select-connect-data-source" ng-if="filter.type == 'number' && (filter.comparison == 'in' || filter.comparison == 'not in')">
                    <label class="col-sm-2 control-label" for="inputDateRange">Comparison Value</label>

                    <div class="col-sm-10">
                        <oi-select ng-model="filter.compareValue" multiple ng-required="true" oi-select-options="{newItem: true, newItemFn: 'addCompareValue($query)'}" placeholder="{{ 'REPORT_BUILDER_MODULE.ENTER_ONE_OR_MULTIPLE_VALUE' | translate }}"></oi-select>

                        <span class="help-block" ng-if="!!filter.comparison && filter.comparison !='in' && filter.comparison != 'not in'">{{ 'REPORT_BUILDER_MODULE.HELP_TEXT_FOR_ENTER_VALUES' | translate }}</span>
                    </div>
                </div>

                <div class="form-group select-connect-data-source" ng-if="filter.type == 'number' && filter.comparison !='in' && filter.comparison !='not in'">
                    <label class="col-sm-2 control-label" for="inputDateRange">Comparison Value</label>

                    <div class="col-sm-10">
                        <input class="form-control" autocomplete="false" type="number" id="inputComparisonValue" ng-model="filter.compareValue" ng-required="true" placeholder="Comparison Value">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>