<div ng-if="hasResult">
    <tc-performance-report-overview report-group="reportGroup"></tc-performance-report-overview>

    <div class="panel panel-default daily-reports">
        <div class="panel-heading">{{ 'REPORT.AD_TAG_BREAKDOWN' | translate }}
            <div class="button-bar hidden-xs">
                <button ng-click="backToAdTagList()" class="btn btn-sm btn-primary btn-manage-ad-tag" type="button">
                    {{ 'PERFORMANCE_REPORT_MODULE.MANAGE_AD_TAGS' | translate }}
                </button>
                <div ng-show="!isAdmin" class="pull-right" ng-dropdown-multiselect="" checkboxes="true" events="eventSettings" options="dataSelect" selected-model="modelSelect" extra-settings="settingsSelect" translation-texts="translationTexts"></div>
                <export-excel data="reports" report-fields="getReportFields([{key: 'date', label: 'Date'}, {key: 'name', label: 'Ad Tag'}], 'adTag')" file-name="getExportExcelFileName"></export-excel>
            </div>

            <div class="btn-group btnGrouped" dropdown>
                <div ng-show="!isAdmin" class="pull-right" ng-dropdown-multiselect="" checkboxes="true" events="eventSettings" options="dataSelect" selected-model="modelSelect" extra-settings="settingsSelect" translation-texts="translationTexts"></div>
                <button type="button" class="btn " dropdown-toggle><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></button>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li ng-click="backToAdTagList()"><a>{{ 'PERFORMANCE_REPORT_MODULE.MANAGE_AD_TAGS' | translate }}</a></li>
                    <li><a>
                        <export-excel css-class="''" data="reports" report-fields="getReportFields([{key: 'date', label: 'Date'}, {key: 'name', label: 'Ad Tag'}], 'adTag')" file-name="getExportExcelFileName"></export-excel>
                    </a></li>
                </ul>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table" at-table at-paginated at-list="reports" at-config="tableConfig">
                <thead>
                <tr>
                    <th at-attribute="totalOpportunities" ng-show="showConfigForPerformanceByAdTag('totalOpportunities')">{{ 'REPORT.NETWORK_OPPORTUNITIES' | translate }}</th>
                    <th at-attribute="adOpportunities" ng-show="showConfigForPerformanceByAdTag('adOpportunities')">{{ 'REPORT.AD_OPPORTUNITIES' | translate }}</th>
                    <th at-attribute="firstOpportunities" ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('firstOpportunities')">{{ 'REPORT.FIRST_OPPORTUNITIES' | translate }}</th>
                    <!--<th at-attribute="impressions" ng-show="showConfigForPerformanceByAdTag('impressions')">{{ 'REPORT.IMPRESSIONS' | translate }}</th>-->
                    <th at-attribute="inBannerImpressions" ng-show="showConfigForPerformanceByAdTag('inBannerImpressions')">{{ 'REPORT.IN_BANNER_IMPRESSIONS' | translate }}</th>
                    <th at-attribute="networkOpportunityFillRate" ng-show="showConfigForPerformanceByAdTag('networkOpportunityFillRate')">{{ 'REPORT.NETWORK_OPPORTUNITY_FILL_RATE' | translate }}</th>
                    <!--<th at-attribute="verifiedImpressions" ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('verifiedImpressions')">{{ 'REPORT.VERIFIED_IMPRESSIONS' | translate }}</th>-->
                    <!--Remove unverified impressions-->
                    <!--<th at-attribute="unverifiedImpressions" ng-show="!isAdmin && isNotNativeAdSlot && showConfigForPerformanceByAdTag('unverifiedImpressions')">{{ 'REPORT.UNVERIFIED_IMPRESSIONS' | translate }}</th>-->
                    <!--<th at-attribute="blankImpressions" ng-show="isAdmin && isNotNativeAdSlot">{{ 'REPORT.BLANK_IMPRESSIONS' | translate }}</th>-->
                    <th at-attribute="voidImpressions" ng-show="isAdmin && isNotNativeAdSlot">{{ 'REPORT.VOID_IMPRESSIONS' | translate }}</th>
                    <th at-attribute="clicks" ng-show="!isAdmin && isNotNativeAdSlot && showConfigForPerformanceByAdTag('clicks')">{{ 'REPORT.CLICKS' | translate }}</th>
                    <th at-attribute="passbacks" ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('passbacks')">{{ 'REPORT.PASSBACKS' | translate }}</th>
                    <th at-attribute="fillRate" ng-show="!isAdmin && showConfigForPerformanceByAdTag('fillRate')">{{ 'REPORT.FILL_RATE' | translate }}</th>
                    <th at-attribute="refreshes" ng-show="showConfigForPerformanceByAdTag('refreshes')">{{ 'REPORT.REFRESHES' | translate }}</th>
                    <th at-attribute="estRevenue" ng-show="showConfigForPerformanceByAdTag('estRevenue')">{{ 'REPORT.EST_REVENUE' | translate }}</th>
                    <!--<th at-attribute="supplyCost" ng-show="showConfigForPerformanceByAdTag('supplyCost')">{{ 'REPORT.SUPPLY_COST' | translate }}</th>-->
                    <!--<th at-attribute="estProfit" ng-show="showConfigForPerformanceByAdTag('estProfit')">{{ 'REPORT.EST_PROFIT' | translate }}</th>-->
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td at-title="{{ 'ACTIONS' | translate }}">
                        <div class="btn-group" dropdown>
                            <button type="button" class="btn " dropdown-toggle> {{ 'ACTIONS' | translate }} <span class="caret"></span> </button>
                            <ul class="dropdown-menu pull-right-dropdown" role="menu">
                                <li><a ng-click="popupReport(reportStates.adTags, item)">Ad Tag Info</a></li>
                                <li ng-if="!isSubPublisher()"><a ng-click="goToEditPage('tagManagement.adTag.edit', item.reportType.adTagId)">Edit Ad Tag</a></li>
                                <!--<li><a ng-click="openUpdateCpm(item, 'adTag')">Update Cpm</a></li>-->
                            </ul>
                        </div>
                    </td>
                    <td at-title="{{ 'REPORT.DATE' | translate }}" at-sortable at-initial-sorting="desc" at-attribute="date">
                        {{ item.date | date }}
                    </td>
                    <td class="name" at-title="{{ 'AD_TAG' | translate }}" at-attribute="name" at-sortable>
                        {{ item.name }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('totalOpportunities')" at-title="{{ 'REPORT.NETWORK_OPPORTUNITIES' | translate }}" at-attribute="totalOpportunities" at-sortable>
                        {{ item.totalOpportunities | number }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('adOpportunities')" at-title="{{ 'REPORT.AD_OPPORTUNITIES' | translate }}" at-attribute="adOpportunities" at-sortable>
                        {{ item.adOpportunities | number }}
                    </td>
                    <td ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('firstOpportunities')" at-title="{{ 'REPORT.FIRST_OPPORTUNITIES' | translate }}" at-attribute="firstOpportunities" at-sortable>
                        {{ item.firstOpportunities | number }}
                    </td>
                    <td ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('passbacks')" at-title="{{ 'REPORT.PASSBACKS' | translate }}" at-attribute="passbacks" at-sortable>
                        {{ item.passbacks | number }}
                    </td>
                    <!--<td ng-show="showConfigForPerformanceByAdTag('impressions')" at-title="{{ 'REPORT.IMPRESSIONS' | translate }}" at-attribute="impressions" at-sortable>-->
                        <!--{{ item.impressions | number }}-->
                    <!--</td>-->
                    <td ng-show="showConfigForPerformanceByAdTag('inBannerImpressions')" at-title="{{ 'REPORT.IN_BANNER_IMPRESSIONS' | translate }}" at-attribute="inBannerImpressions" at-sortable>
                        {{ item.inBannerImpressions | number }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('networkOpportunityFillRate')" at-title="{{ 'REPORT.NETWORK_OPPORTUNITY_FILL_RATE' | translate }}" at-attribute="networkOpportunityFillRate" at-sortable>
                        {{ item.networkOpportunityFillRate | percentage }}
                    </td>
                    <!--<td ng-show="isNotNativeAdSlot && showConfigForPerformanceByAdTag('verifiedImpressions')" at-title="{{ 'REPORT.VERIFIED_IMPRESSIONS' | translate }}" at-attribute="verifiedImpressions" at-sortable>-->
                    <!--{{ item.verifiedImpressions | number }}-->
                    <!--</td>-->
                    <!--Remove unverified impressions-->
                    <!--<td ng-show="!isAdmin && isNotNativeAdSlot && showConfigForPerformanceByAdTag('unverifiedImpressions')" at-title="{{ 'REPORT.UNVERIFIED_IMPRESSIONS' | translate }}" at-attribute="unverifiedImpressions" at-sortable>-->
                        <!--{{ item.unverifiedImpressions | number }}-->
                    <!--</td>-->
                    <!--<td ng-show="isAdmin && isNotNativeAdSlot" at-title="{{ 'REPORT.BLANK_IMPRESSIONS' | translate }}" at-attribute="blankImpressions" at-sortable>-->
                        <!--{{ item.blankImpressions | number }}-->
                    <!--</td>-->
                    <td ng-show="!isAdmin && isNotNativeAdSlot && showConfigForPerformanceByAdTag('clicks')" at-title="{{ 'REPORT.CLICKS' | translate }}" at-attribute="clicks" at-sortable>
                        {{ item.clicks | number }}
                    </td>
                    <td ng-show="!isAdmin && showConfigForPerformanceByAdTag('fillRate')" at-title="{{ 'REPORT.FILL_RATE' | translate }}" at-attribute="fillRate" at-sortable>
                        {{ item.fillRate | percentage }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('refreshes')" at-title="{{ 'REPORT.REFRESHES' | translate }}" at-attribute="refreshes" at-sortable>
                        {{ item.refreshes | number }}
                    </td>
                    <td ng-show="isAdmin && isNotNativeAdSlot" at-title="{{ 'REPORT.VOID_IMPRESSIONS' | translate }}" at-attribute="voidImpressions" at-sortable>
                        {{ item.voidImpressions | number }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('estRevenue')" at-title="{{ 'REPORT.EST_REVENUE' | translate }}" at-attribute="estRevenue" at-sortable>
                        {{ item.estRevenue | currency }}
                    </td>
                    <!--<td ng-show="showConfigForPerformanceByAdTag('supplyCost')" at-title="{{ 'REPORT.SUPPLY_COST' | translate }}" at-attribute="supplyCost" at-sortable>-->
                        <!--{{ item.supplyCost | currency }}-->
                    <!--</td>-->
                    <!--<td ng-show="showConfigForPerformanceByAdTag('estProfit')" at-title="{{ 'REPORT.EST_PROFIT' | translate }}" at-attribute="estProfit" at-sortable>-->
                        <!--{{ item.estProfit | currency }}-->
                    <!--</td>-->
                    <!--<td at-title="Est. Revenue" at-attribute="estRevenue" at-sortable>-->
                        <!--{{ item.estRevenue | currency:'$':4 }}-->
                    <!--</td>-->
                    <!--<td at-title="Est. CPM" at-attribute="estCpm" at-sortable>-->
                        <!--{{ item.estCpm | currency:'$':4 }}-->
                    <!--</td>-->
                </tr>
                </tbody>
            </table>
        </div>

        <at-pagination ng-if="showPagination()" class="table-footer" at-list="reports" at-config="tableConfig"></at-pagination>
    </div>

    <tc-performance-report-summary report-group="reportGroup" show-refreshes="true"></tc-performance-report-summary>
</div>