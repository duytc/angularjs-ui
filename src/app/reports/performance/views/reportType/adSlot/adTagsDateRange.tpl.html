<div ng-if="hasResult">
    <tc-performance-report-overview report-group="reportGroup"></tc-performance-report-overview>

    <div class="panel panel-default daily-reports">
        <div class="panel-heading"><span class="glyphicon glyphicon-th"></span>
            Ad Tag Breakdown
            <div class="button-bar hidden-xs">
                <button ng-click="backToAdTagList()" class="btn btn-sm btn-primary btn-manage-ad-tag" type="button">
                    Manage Ad Tags
                </button>

                <export-excel data="reports" fields="['startDate', 'endDate', 'name', 'totalOpportunities', 'impressions', 'passbacks', 'fillRate']" header="['Start Date', 'End Date', 'Ad Tag', 'Network Opportunities', 'Impressions', 'Passbacks', 'Fill Rate']" file-name="getExportExcelFileName"></export-excel>
                <!--<export-excel data="reports" fields="['startDate', 'endDate', 'name', 'totalOpportunities', 'impressions', 'passbacks', 'fillRate', 'estRevenue', 'estCpm']" header="['Start Date', 'End Date', 'Ad Tag', 'Network Opportunities', 'Impressions', 'Passbacks', 'Fill Rate', 'Est. Revenue ($)', 'Est. CPM ($)']" file-name="getExportExcelFileName"></export-excel>-->
            </div>
        </div>
        <div class="table-responsive">
            <table class="table" at-table at-paginated at-list="reports" at-config="tableConfig">
                <thead>
                <tr>
                    <th at-attribute="totalOpportunities" ng-show="showConfigForPerformanceByAdTag('networkOpportunities')">Network Opportunities</th>
                    <th at-attribute="firstOpportunities" ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('firstOpportunities')">First Opportunities</th>
                    <th at-attribute="impressions" ng-show="showConfigForPerformanceByAdTag('impressions')">Impressions</th>
                    <th at-attribute="verifiedImpressions" ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('verifiedImpressions')">Verified Impressions</th>
                    <th at-attribute="unverifiedImpressions" ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('unverifiedImpressions')">Unverified Impressions</th>
                    <th at-attribute="blankImpressions" ng-show="isAdmin && isNativeAdSlot">Blank Impressions</th>
                    <th at-attribute="voidImpressions" ng-show="isAdmin && isNativeAdSlot">Void Impressions</th>
                    <th at-attribute="clicks" ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('clicks')">Clicks</th>
                    <th at-attribute="passbacks" ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('passbacks')">Passbacks</th>
                    <th at-attribute="fillRate" ng-show="showConfigForPerformanceByAdTag('fillRate')">Tier Fill Rate</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td at-title="Actions">
                        <div class="btn-group" dropdown>
                            <button type="button" class="btn " dropdown-toggle> Actions <span class="caret"></span> </button>
                            <ul class="dropdown-menu pull-right-dropdown" role="menu">
                                <li><a ng-click="popupReport(reportStates.adTags, item)">Ad Tag Info</a></li>
                                <li><a ng-click="goToEditPage('tagManagement.adTag.edit', item.reportType.adTagId)">Edit Ad Tag</a></li>
                                <!--<li><a ng-click="openUpdateCpm(item, 'adTag')">Update Cpm</a></li>-->
                            </ul>
                        </div>
                    </td>
                    <td at-title="Start Date" at-attribute="startDate">
                        {{ item.startDate | date }}
                    </td>
                    <td at-title="End Date" at-attribute="endDate">
                        {{ item.endDate | date }}
                    </td>
                    <td class="name" at-title="Ad Tag" at-attribute="name" at-sortable>
                        {{ item.name }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('networkOpportunities')" at-title="Network Opportunities" at-attribute="totalOpportunities" at-sortable at-initial-sorting="desc">
                        {{ item.totalOpportunities | number }}
                    </td>
                    <td ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('firstOpportunities')" at-title="First Opportunities" at-attribute="firstOpportunities" at-sortable>
                        {{ item.firstOpportunities | number }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('impressions')" at-title="Impressions" at-attribute="impressions" at-sortable>
                        {{ item.impressions | number }}
                    </td>
                    <td ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('verifiedImpressions')" at-title="Verified Impressions" at-attribute="verifiedImpressions" at-sortable>
                        {{ item.verifiedImpressions | number }}
                    </td>
                    <td ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('unverifiedImpressions')" at-attribute="unverifiedImpressions" at-sortable>
                        {{ item.unverifiedImpressions | number }}
                    </td>
                    <td ng-show="isAdmin && isNativeAdSlot" at-title="Blank Impressions" at-attribute="blankImpressions" at-sortable>
                        {{ item.blankImpressions | number }}
                    </td>
                    <td ng-show="isAdmin && isNativeAdSlot" at-title="Void Impressions" at-attribute="voidImpressions" at-sortable>
                        {{ item.voidImpressions | number }}
                    </td>
                    <td ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('clicks')" at-attribute="clicks" at-sortable>
                        {{ item.clicks | number }}
                    </td>
                    <td ng-show="isNativeAdSlot && showConfigForPerformanceByAdTag('passbacks')" at-attribute="passbacks" at-sortable>
                        {{ item.passbacks | number }}
                    </td>
                    <td ng-show="showConfigForPerformanceByAdTag('fillRate')" at-title="Tier Fill Rate" at-attribute="fillRate" at-sortable>
                        {{ item.fillRate | percentage }}
                    </td>

                    <!--<td at-title="Est. Revenue" at-attribute="estRevenue" at-sortable>-->
                    <!--{{ item.estRevenue | currency:'$':4 }}-->
                    <!--</td>-->
                    <!--<td at-title="Est. CPM" at-attribute="estCpm" at-sortable>-->
                    <!--{{ item.estCpm | currency:'$':4 }}-->
                    <!--</td>-->
                </tr>
                </tbody>
            </table>
        </div>

        <at-pagination ng-if="showPagination()" class="table-footer" at-list="reports" at-config="tableConfig"></at-pagination>
    </div>

    <tc-performance-report-summary report-group="reportGroup"></tc-performance-report-summary>
</div>