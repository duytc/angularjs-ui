<nav class="row">
    <div class="col-sm-12">

        <section class="panel panel-default mail-categories">
            <div class="panel-heading" ng-click="isCollapsed = !isCollapsed">Report Selector<span class="pull-right glyphicon" ng-class="isCollapsed ? 'glyphicon-chevron-down' : 'glyphicon-chevron-up'"></span></div>
            <div collapse="isCollapsed">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-sm-6">

                            <form name="reportSelectorForm" class="form-validation form-horizontal" role="form" ng-submit="submit()" novalidate>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label" for="inputDateRange">Date Range</label>
                                    <div class="col-sm-10">
                                        <input date-range-picker="{{ datePickerOpts }}" class="form-control date-picker" type="text" id="inputDateRange" ng-model="criteria.date" ng-required="true">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-sm-2 control-label">Report Type</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.reportType" ng-required="true" on-select="selectReportType($item)">
                                            <ui-select-match placeholder="Select a report type">{{ $select.selected.name }}</ui-select-match>
                                            <ui-select-choices repeat="type.type as type in reportTypes | filter: { name: $select.search }">
                                                {{ type.name }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>

                                <div class="form-group" ng-if="fieldShouldBeVisible('publisher') && isAdmin">
                                    <label class="col-sm-2 control-label">Publisher</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.publisherId" ng-required="true" on-select="selectPublisher($item, $model)" ng-disabled="!entityFieldData.publisherList.length">
                                            <ui-select-match placeholder="Select a publisher">{{ $select.selected.username }}</ui-select-match>
                                            <ui-select-choices repeat="publisher.id as publisher in entityFieldData.publisherList | filter: { username: $select.search }">
                                                {{ publisher.username }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>

                                <div class="form-group" ng-if="fieldShouldBeVisible('site')">
                                    <label class="col-sm-2 control-label">Site</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.siteId" ng-required="true" on-select="selectSite($item, $model)" ng-disabled="(isAdmin && !criteria.publisherId) || !entityFieldData.siteList.length">
                                            <ui-select-match placeholder="Select a site">{{ $select.selected.name }}</ui-select-match>
                                            <ui-select-choices repeat="site.id as site in entityFieldData.siteList | filter: { name: $select.search } | selectedPublisher:criteria.publisherId">
                                                {{ site.name }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>
                                <div class="form-group" ng-if="fieldShouldBeVisible('adSlot')">
                                    <label class="col-sm-2 control-label">Ad Slot</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.adSlotId" ng-required="true" on-select="selectAdSlot($item, $model)" ng-disabled="!criteria.siteId || !entityFieldData.adSlotList.length">
                                            <ui-select-match placeholder="Select an ad slot">{{ $select.selected.name }}</ui-select-match>
                                            <ui-select-choices repeat="adSlot.id as adSlot in entityFieldData.adSlotList | filter: { name: $select.search }">
                                                {{ adSlot.name }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>

                                <div class="form-group" ng-if="fieldShouldBeVisible('adTag')">
                                    <label class="col-sm-2 control-label">Ad Tag</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.adTagId" ng-required="true" ng-disabled="!criteria.adSlotId || !entityFieldData.adTagList.length">
                                            <ui-select-match placeholder="Select an ad tag">{{ $select.selected.name }}</ui-select-match>
                                            <ui-select-choices repeat="adTag.id as adTag in entityFieldData.adTagList | filter: { name: $select.search }">
                                                {{ adTag.name }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>

                                <div class="form-group" ng-if="fieldShouldBeVisible('adNetwork')">
                                    <label class="col-sm-2 control-label">Ad Network</label>
                                    <div class="col-sm-10">
                                        <ui-select ng-model="criteria.adNetworkId" ng-required="true" ng-disabled="(isAdmin && !criteria.publisherId) || !entityFieldData.adNetworkList.length">
                                            <ui-select-match placeholder="Select an ad network">{{ $select.selected.name }}</ui-select-match>
                                            <ui-select-choices repeat="adNetwork.id as adNetwork in entityFieldData.adNetworkList | filter: { name: $select.search } | selectedPublisher:criteria.publisherId">
                                                {{ adNetwork.name }}
                                            </ui-select-choices>
                                        </ui-select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <button ng-disabled="!isFormValid()" ng-disabled="formProcessing" type="submit" class="btn btn-success">Submit</button>
                                        <div class="callout callout-info">
                                            <p>Submit button will be active only when all fields are valid.</p>
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>
</nav>