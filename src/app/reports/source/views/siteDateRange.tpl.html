<div ng-if="hasResult">
    <tc-source-report-overview report-group="reportGroup"></tc-source-report-overview>

    <div class="panel panel-default daily-reports">
        <div class="panel-heading"><span class="glyphicon glyphicon-th"></span>
            Daily Breakdown
            <div class="button-bar">
                <export-excel
                        data="reports"
                        fields="['date', 'visits', 'pageViews', 'viewsPerVisit', 'qtos', 'qtosPercentage', 'displayOpportunities', 'displayImpressions', 'displayFillRate', 'displayClicks', 'displayCTR', 'displayIPV', 'videoPlayerReady', 'videoAdPlays', 'videoAdImpressions', 'videoAdCompletions', 'videoAdCompletionRate', 'videoIPV', 'videoAdClicks']"
                        header="['Date', 'Visits', 'Page Views', 'Views Per Visit', 'QTOS', 'QTOS (%)', 'Slot Opportunities', 'Impressions', 'Fill Rate', 'Clicks', 'CTR', 'Display IPV', 'Player Ready', 'Ad Plays', 'Ad Impressions', 'Ad Completions', 'Ad Completion Rate', 'Video IPV', 'Ad Clicks']" file-name="getExportExcelFileName"></export-excel>
            </div>
            <div class="btn-group btnGrouped" dropdown>
                <button type="button" class="btn " dropdown-toggle><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></button>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li>
                        <export-excel
                                data="reports"
                                fields="['date', 'visits', 'pageViews', 'viewsPerVisit', 'qtos', 'qtosPercentage', 'displayOpportunities', 'displayImpressions', 'displayFillRate', 'displayClicks', 'displayCTR', 'displayIPV', 'videoPlayerReady', 'videoAdPlays', 'videoAdImpressions', 'videoAdCompletions', 'videoAdCompletionRate', 'videoIPV', 'videoAdClicks']"
                                header="['Date', 'Visits', 'Page Views', 'Views Per Visit', 'QTOS', 'QTOS (%)', 'Slot Opportunities', 'Impressions', 'Fill Rate', 'Clicks', 'CTR', 'Display IPV', 'Player Ready', 'Ad Plays', 'Ad Impressions', 'Ad Completions', 'Ad Completion Rate', 'Video IPV', 'Ad Clicks']" file-name="getExportExcelFileName"></export-excel>
                    </li>
                </ul>
            </div>
        </div>

        <ul class="nav nav-tabs source-reports">
            <li role="presentation" ng-class="reportViews.user ? 'active' : ''"><a ng-click="showView('user')">User</a></li>
            <li role="presentation" ng-class="reportViews.display ? 'active' : ''"><a ng-click="showView('display')">Display</a></li>
            <li role="presentation" ng-class="reportViews.video ? 'active' : ''"><a ng-click="showView('video')">Video</a></li>
        </ul>

        <div class="table-responsive" ng-cloak>
            <table class="table table-hover source-reports" at-table at-paginated at-list="reports" at-config="tableConfig">
                <thead>
                <tr>
                    <th at-attribute="date">Date</th>
                    <th ng-show="reportViews.user" at-attribute="visits">Visits</th>
                    <th ng-show="reportViews.user" at-attribute="pageViews">Page Views</th>
                    <th ng-show="reportViews.user" at-attribute="viewsPerVisit">Views Per Visit</th>
                    <th ng-show="reportViews.user" at-attribute="qtos">QTOS</th>
                    <th ng-show="reportViews.user" at-attribute="qtosPercentage">QTOS %</th>
                    <th ng-show="reportViews.display" at-attribute="displayOpportunities">Slot Opportunities</th>
                    <th ng-show="reportViews.display" at-attribute="displayImpressions">Impressions</th>
                    <th ng-show="reportViews.display" at-attribute="displayFillRate">Fill Rate</th>
                    <th ng-show="reportViews.display" at-attribute="displayClicks">Clicks</th>
                    <th ng-show="reportViews.display" at-attribute="displayCTR">CTR</th>
                    <th ng-show="reportViews.display" at-attribute="displayIPV">IPV</th>
                    <th ng-show="reportViews.video" at-attribute="videoPlayerReady">Player Ready</th>
                    <th ng-show="reportViews.video" at-attribute="videoAdPlays">Ad Plays</th>
                    <th ng-show="reportViews.video" at-attribute="videoAdImpressions">Ad Impressions</th>
                    <th ng-show="reportViews.video" at-attribute="videoAdCompletions">Ad Completions</th>
                    <th ng-show="reportViews.video" at-attribute="videoAdCompletionRate">Ad Completion Rate</th>
                    <th ng-show="reportViews.video" at-attribute="videoIPV">IPV</th>
                    <th ng-show="reportViews.video" at-attribute="videoAdClicks">Ad Clicks</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-click="openDetail(item.siteId, item.date)">
                    <td at-title="Date" at-attribute="date" at-sortable at-initial-sorting="desc">
                        {{ item.date | date }}
                    </td>
                    <td ng-show="reportViews.user" at-title="Visits" at-attribute="visits" at-sortable>
                        {{ item.visits | number }}
                    </td>
                    <td ng-show="reportViews.user" at-title="Page Views" at-attribute="pageViews" at-sortable>
                        {{ item.pageViews | number }}
                    </td>
                    <td ng-show="reportViews.user" at-title="Views Per Visit" at-attribute="viewsPerVisit" at-sortable>
                        {{ item.viewsPerVisit | number }}
                    </td>
                    <td ng-show="reportViews.user" at-title="QTOS" at-attribute="qtos" at-sortable>
                        {{ item.qtos | number }}
                    </td>
                    <td ng-show="reportViews.user" at-title="QTOS %" at-attribute="qtosPercentage" at-sortable>
                        {{ item.qtosPercentage | percentage }}
                    </td>
                    <td ng-show="reportViews.display" at-title="Slot Opportunities" at-attribute="displayOpportunities" at-sortable>
                        {{ item.displayOpportunities | number }}
                    </td>
                    <td ng-show="reportViews.display" at-title="Impressions" at-attribute="displayImpressions" at-sortable>
                        {{ item.displayImpressions | number }}
                    </td>
                    <td ng-show="reportViews.display" at-title="Fill Rate" at-attribute="displayFillRate" at-sortable>
                        {{ item.displayFillRate | percentage }}
                    </td>
                    <td ng-show="reportViews.display" at-title="Clicks" at-attribute="displayClicks" at-sortable>
                        {{ item.displayClicks | number }}
                    </td>
                    <td ng-show="reportViews.display" at-title="CTR" at-attribute="displayCTR" at-sortable>
                        {{ item.displayCTR | percentage }}
                    </td>
                    <td ng-show="reportViews.display" at-title="IPV" at-attribute="displayIPV" at-sortable>
                        {{ item.displayIPV | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Player Ready" at-attribute="videoPlayerReady" at-sortable>
                        {{ item.videoPlayerReady | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Ad Plays" at-attribute="videoAdPlays" at-sortable>
                        {{ item.videoAdPlays | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Ad Impressions" at-attribute="videoAdImpressions" at-sortable>
                        {{ item.videoAdImpressions | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Ad Completions" at-attribute="videoAdCompletions" at-sortable>
                        {{ item.videoAdCompletions | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Ad Completion Rate" at-attribute="videoAdCompletionRate" at-sortable>
                        {{ item.videoAdCompletionRate | percentage }}
                    </td>
                    <td ng-show="reportViews.video" at-title="IPV" at-attribute="videoIPV" at-sortable>
                        {{ item.videoIPV | number }}
                    </td>
                    <td ng-show="reportViews.video" at-title="Ad Clicks" at-attribute="videoAdClicks" at-sortable>
                        {{ item.videoAdClicks | number }}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <at-pagination ng-if="showPagination()" class="table-footer" at-list="reports" at-config="tableConfig"></at-pagination>
    </div>

    <tc-source-report-summary report-group="reportGroup"></tc-source-report-summary>
</div>